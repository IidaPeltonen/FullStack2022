{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Iida\\\\React\\\\FullStack\\\\FullStack2022\\\\Osa2\\\\puhelinluettelo\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Persons from \"./components/Person\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState([{}]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [success, setSuccess] = useState('');\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n    setFilteredPersons(persons); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  console.log(\"render\", persons.length, \"persons\");\n  console.log(\"filteredPersons \", filteredPersons);\n\n  const LisaaUusi = event => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    };\n    let id;\n    let namesMatch = false;\n    let name;\n    persons.forEach((item, index) => {\n      if (item.name.toLowerCase() === newName.toLowerCase()) {\n        namesMatch = true;\n        id = item.id;\n      }\n    });\n\n    if (namesMatch) {\n      let result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n\n      if (!result) {\n        setNewName(\"\");\n        setNewNumber(\"\");\n      } else {\n        personService.update(id, nameObject).then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setSuccess(`Modified ${returnedPerson.name}`);\n          console.log(\"update: \", newName);\n          setTimeout(() => {\n            setSuccessMessage(null);\n            window.location.reload(false);\n          }, 5000);\n        }).catch(error => {\n          console.log(\"error: \", name);\n          setSuccessMessage(`Information of ${newName} has already been removed from server`);\n          setTimeout(() => {\n            setSuccessMessage(null);\n            window.location.reload(false);\n          }, 5000);\n        });\n      }\n    } else {\n      personService.create(nameObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setSuccessMessage(`Added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n          window.location.reload(false);\n        }, 5000);\n      }).catch(error => {\n        const err = error.response.data.error;\n        setSuccessMessage(`Error: ${err}`);\n        console.log(error.response.data);\n      });\n      setTimeout(() => {\n        setSuccessMessage(null);\n        window.location.reload(false);\n      }, 5000);\n    }\n  };\n\n  const handlePersonChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Filter, {\n        persons: persons\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: LisaaUusi,\n      children: [/*#__PURE__*/_jsxDEV(Notification, {\n        message: message,\n        message2: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), \"Nimi: \", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: newPerson,\n        onChange: handlePersonChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), \"Numero: \", /*#__PURE__*/_jsxDEV(\"input\", {\n        value: newNumber,\n        onChange: handleNumberChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Tallenna\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Persons, {\n        allPersons: persons,\n        persons: filteredPersons\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"+++zlwHu01xe+IWAUSkecU5xh8Q=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Iida/React/FullStack/FullStack2022/Osa2/puhelinluettelo/src/App.js"],"names":["useState","useEffect","Persons","Filter","personService","Notification","App","persons","setPersons","filteredPersons","setFilteredPersons","newName","setNewName","newNumber","setNewNumber","success","setSuccess","error","setError","successMessage","setSuccessMessage","getAll","then","initialPersons","console","log","length","LisaaUusi","event","preventDefault","nameObject","name","number","id","namesMatch","forEach","item","index","toLowerCase","result","window","confirm","update","returnedPerson","concat","setTimeout","location","reload","catch","create","err","response","data","handlePersonChange","target","value","handleNumberChange","message","newPerson"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Persons from \"./components/Person\";\r\nimport Filter from \"./components/Filter\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n\r\n  const [filteredPersons, setFilteredPersons] = useState([{}]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [success, setSuccess] = useState('')\r\n  const [error, setError] = useState('')\r\n\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n    setFilteredPersons(persons);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  console.log(\"render\", persons.length, \"persons\");\r\n  console.log(\"filteredPersons \", filteredPersons);\r\n\r\n  const LisaaUusi = (event) => {\r\n    event.preventDefault();\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    let id;\r\n    let namesMatch = false;\r\n    let name;\r\n    persons.forEach((item, index) => {\r\n      if (item.name.toLowerCase() === newName.toLowerCase()) {\r\n        namesMatch = true;\r\n        id = item.id;\r\n      }\r\n    });\r\n\r\n    if (namesMatch) {\r\n      let result = window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with a new one?`\r\n      );\r\n      if (!result) {\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      } else {\r\n        personService\r\n          .update(id, nameObject)\r\n          .then((returnedPerson) => {\r\n            setPersons(persons.concat(returnedPerson));\r\n            setNewName(\"\");\r\n            setSuccess(`Modified ${returnedPerson.name}`);\r\n            console.log(\"update: \", newName);\r\n\r\n            setTimeout(() => {\r\n              setSuccessMessage(null);\r\n              window.location.reload(false);\r\n            }, 5000);\r\n          })\r\n          .catch((error) => {\r\n            console.log(\"error: \", name);\r\n\r\n            setSuccessMessage(\r\n              `Information of ${newName} has already been removed from server`\r\n            );\r\n            setTimeout(() => {\r\n              setSuccessMessage(null);\r\n              window.location.reload(false);\r\n            }, 5000);\r\n          });\r\n      }\r\n    } else {\r\n      personService\r\n        .create(nameObject)\r\n        .then((returnedPerson) => {\r\n          setPersons(persons.concat(returnedPerson));\r\n          setNewName(\"\");\r\n\r\n          setSuccessMessage(`Added ${returnedPerson.name}`);\r\n\r\n          setTimeout(() => {\r\n            setSuccessMessage(null);\r\n            window.location.reload(false);\r\n          }, 5000);\r\n        })\r\n        .catch((error) => {\r\n          const err = error.response.data.error;\r\n          setSuccessMessage(`Error: ${err}`);\r\n          console.log(error.response.data);\r\n        });\r\n      setTimeout(() => {\r\n        setSuccessMessage(null);\r\n        window.location.reload(false);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const handlePersonChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <div>\r\n        <Filter persons={persons} />\r\n      </div>\r\n      <h3>add a new</h3>\r\n      <form onSubmit={LisaaUusi}>\r\n        <Notification message={message} message2={error} />\r\n        Nimi: <input value={newPerson} onChange={handlePersonChange} />\r\n        <br />\r\n        Numero: <input value={newNumber} onChange={handleNumberChange} />\r\n        <br />\r\n        <button type='submit'>Tallenna</button>\r\n      </form>  \r\n\r\n      <h3>Numbers</h3>\r\n      <Notification message={successMessage} />\r\n\r\n      <div>\r\n        <Persons allPersons={persons} persons={filteredPersons} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}