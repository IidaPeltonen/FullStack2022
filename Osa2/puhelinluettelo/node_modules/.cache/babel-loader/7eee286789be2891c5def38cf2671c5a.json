{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Iida\\\\React\\\\FullStack\\\\FullStack2022\\\\Osa2\\\\puhelinluettelo\\\\src\\\\components\\\\UudenLisays.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  ;\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n    setFilteredPersons(persons); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  console.log(\"render\", persons.length, \"persons\");\n  console.log(\"filteredPersons \", filteredPersons);\n\n  const addName = event => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    };\n    let id;\n    let namesMatch = false;\n    let name;\n    persons.forEach((item, index) => {\n      if (item.name.toLowerCase() === newName.toLowerCase()) {\n        namesMatch = true;\n        id = item.id;\n      }\n    });\n\n    if (namesMatch) {\n      let result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n\n      if (!result) {\n        setNewName(\"\");\n        setNewNumber(\"\");\n      } else {\n        personService.update(id, nameObject).then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setSuccessMessage(`Modified ${returnedPerson.name}`);\n          console.log(\"update: \", newName);\n          setTimeout(() => {\n            setSuccessMessage(null);\n            window.location.reload(false);\n          }, 5000);\n        }).catch(error => {\n          console.log(\"error: \", name);\n          setSuccessMessage(`Information of ${newName} has already been removed from server`);\n          setTimeout(() => {\n            setSuccessMessage(null);\n            window.location.reload(false);\n          }, 5000);\n        });\n      }\n    } else {\n      personService.create(nameObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setSuccessMessage(`Added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n          window.location.reload(false);\n        }, 5000);\n      }).catch(error => {\n        const err = error.response.data.error;\n        setSuccessMessage(`Error: ${err}`);\n        console.log(error.response.data);\n      });\n      setTimeout(() => {\n        setSuccessMessage(null);\n        window.location.reload(false);\n      }, 5000);\n    }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setFilteredPersons(persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase())));\n    setNewFilter(event.target.value);\n    console.log(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Filter, {\n        value: newFilter,\n        onChange: handleFilterChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      onSubmit: addName,\n      nameValue: newName,\n      onNameChange: handleNameChange,\n      numberValue: newNumber,\n      onNumberChange: handleNumberChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Persons, {\n        allPersons: persons,\n        persons: filteredPersons\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"o6pH0SAXDhRCfXWfl8a9vo2JVo4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Iida/React/FullStack/FullStack2022/Osa2/puhelinluettelo/src/components/UudenLisays.js"],"names":["useState","useEffect","Persons","Filter","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","successMessage","setSuccessMessage","getAll","then","initialPersons","setFilteredPersons","console","log","length","filteredPersons","addName","event","preventDefault","nameObject","name","number","id","namesMatch","forEach","item","index","toLowerCase","result","window","confirm","update","returnedPerson","concat","setTimeout","location","reload","catch","error","create","err","response","data","handleNameChange","target","value","handleNumberChange","handleFilterChange","filter","person","includes"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Persons from \"./components/Persons\";\r\nimport Filter from \"./components/Filter\";\r\nimport personService from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n;\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [newFilter, setNewFilter] = useState(\"\");\r\n\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n    setFilteredPersons(persons);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  console.log(\"render\", persons.length, \"persons\");\r\n  console.log(\"filteredPersons \", filteredPersons);\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault();\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    let id;\r\n    let namesMatch = false;\r\n    let name;\r\n    persons.forEach((item, index) => {\r\n      if (item.name.toLowerCase() === newName.toLowerCase()) {\r\n        namesMatch = true;\r\n        id = item.id;\r\n      }\r\n    });\r\n\r\n    if (namesMatch) {\r\n      let result = window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with a new one?`\r\n      );\r\n      if (!result) {\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      } else {\r\n        personService\r\n          .update(id, nameObject)\r\n          .then((returnedPerson) => {\r\n            setPersons(persons.concat(returnedPerson));\r\n            setNewName(\"\");\r\n            setSuccessMessage(`Modified ${returnedPerson.name}`);\r\n            console.log(\"update: \", newName);\r\n\r\n            setTimeout(() => {\r\n              setSuccessMessage(null);\r\n              window.location.reload(false);\r\n            }, 5000);\r\n          })\r\n          .catch((error) => {\r\n            console.log(\"error: \", name);\r\n\r\n            setSuccessMessage(\r\n              `Information of ${newName} has already been removed from server`\r\n            );\r\n            setTimeout(() => {\r\n              setSuccessMessage(null);\r\n              window.location.reload(false);\r\n            }, 5000);\r\n          });\r\n      }\r\n    } else {\r\n      personService\r\n        .create(nameObject)\r\n        .then((returnedPerson) => {\r\n          setPersons(persons.concat(returnedPerson));\r\n          setNewName(\"\");\r\n\r\n          setSuccessMessage(`Added ${returnedPerson.name}`);\r\n\r\n          setTimeout(() => {\r\n            setSuccessMessage(null);\r\n            window.location.reload(false);\r\n          }, 5000);\r\n        })\r\n        .catch((error) => {\r\n          const err = error.response.data.error;\r\n          setSuccessMessage(`Error: ${err}`);\r\n          console.log(error.response.data);\r\n        });\r\n      setTimeout(() => {\r\n        setSuccessMessage(null);\r\n        window.location.reload(false);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilteredPersons(\r\n      persons.filter((person) =>\r\n        person.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n      )\r\n    );\r\n    setNewFilter(event.target.value);\r\n    console.log(event.target.value);\r\n  };\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <div>\r\n        <Filter value={newFilter} onChange={handleFilterChange} />\r\n      </div>\r\n      <h3>add a new</h3>\r\n      <PersonForm\r\n        onSubmit={addName}\r\n        nameValue={newName}\r\n        onNameChange={handleNameChange}\r\n        numberValue={newNumber}\r\n        onNumberChange={handleNumberChange}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      <Notification message={successMessage} />\r\n\r\n      <div>\r\n        <Persons allPersons={persons} persons={filteredPersons} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}