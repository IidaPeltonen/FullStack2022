{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Iida\\\\React\\\\FullStack\\\\FullStack2022\\\\Osa2\\\\puhelinluettelo\\\\src\\\\components\\\\UudenLisays.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n\n  const addName = event => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    };\n    let id;\n    let namesMatch = false;\n    let name;\n    persons.forEach((item, index) => {\n      if (item.name.toLowerCase() === newName.toLowerCase()) {\n        namesMatch = true;\n        id = item.id;\n      }\n    });\n\n    if (namesMatch) {\n      let result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n\n      if (!result) {\n        setNewName(\"\");\n        setNewNumber(\"\");\n      } else {\n        personService.update(id, nameObject).then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          console.log(\"update: \", newName);\n        });\n      }\n    } else {\n      personService.create(nameObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setSuccessMessage(`Added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n          window.location.reload(false);\n        }, 5000);\n      }).catch(error => {\n        const err = error.response.data.error;\n        setSuccessMessage(`Error: ${err}`);\n        console.log(error.response.data);\n      });\n      setTimeout(() => {\n        setSuccessMessage(null);\n        window.location.reload(false);\n      }, 5000);\n    }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setFilteredPersons(persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase())));\n    setNewFilter(event.target.value);\n    console.log(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Filter, {\n        value: newFilter,\n        onChange: handleFilterChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      onSubmit: addName,\n      nameValue: newName,\n      onNameChange: handleNameChange,\n      numberValue: newNumber,\n      onNumberChange: handleNumberChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Persons, {\n        allPersons: persons,\n        persons: filteredPersons\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"Dwcz/9I2N2qVxAfH/WLAP65sgH8=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Iida/React/FullStack/FullStack2022/Osa2/puhelinluettelo/src/components/UudenLisays.js"],"names":["useState","useEffect","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","addName","event","preventDefault","nameObject","name","number","id","namesMatch","forEach","item","index","toLowerCase","result","window","confirm","update","then","returnedPerson","concat","console","log","create","setSuccessMessage","setTimeout","location","reload","catch","error","err","response","data","handleNameChange","target","value","handleNumberChange","handleFilterChange","setFilteredPersons","filter","person","includes","setNewFilter","newFilter","successMessage","filteredPersons"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport personService from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault();\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n    let id;\r\n    let namesMatch = false;\r\n    let name;\r\n    persons.forEach((item, index) => {\r\n      if (item.name.toLowerCase() === newName.toLowerCase()) {\r\n        namesMatch = true;\r\n        id = item.id;\r\n      }\r\n    });\r\n\r\n    if (namesMatch) {\r\n      let result = window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with a new one?`\r\n      );\r\n      if (!result) {\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      } else {\r\n        personService\r\n          .update(id, nameObject)\r\n          .then((returnedPerson) => {\r\n            setPersons(persons.concat(returnedPerson));\r\n            setNewName(\"\");\r\n            console.log(\"update: \", newName);\r\n          })\r\n      }\r\n    } else {\r\n      personService\r\n        .create(nameObject)\r\n        .then((returnedPerson) => {\r\n          setPersons(persons.concat(returnedPerson));\r\n          setNewName(\"\");\r\n\r\n          setSuccessMessage(`Added ${returnedPerson.name}`);\r\n\r\n          setTimeout(() => {\r\n            setSuccessMessage(null);\r\n            window.location.reload(false);\r\n          }, 5000);\r\n        })\r\n        .catch((error) => {\r\n          const err = error.response.data.error;\r\n          setSuccessMessage(`Error: ${err}`);\r\n          console.log(error.response.data);\r\n        });\r\n      setTimeout(() => {\r\n        setSuccessMessage(null);\r\n        window.location.reload(false);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilteredPersons(\r\n      persons.filter((person) =>\r\n        person.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n      )\r\n    );\r\n    setNewFilter(event.target.value);\r\n    console.log(event.target.value);\r\n  };\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <div>\r\n        <Filter value={newFilter} onChange={handleFilterChange} />\r\n      </div>\r\n      <h3>add a new</h3>\r\n      <PersonForm\r\n        onSubmit={addName}\r\n        nameValue={newName}\r\n        onNameChange={handleNameChange}\r\n        numberValue={newNumber}\r\n        onNumberChange={handleNumberChange}\r\n      />\r\n\r\n      <h3>Numbers</h3>\r\n      <Notification message={successMessage} />\r\n\r\n      <div>\r\n        <Persons allPersons={persons} persons={filteredPersons} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}